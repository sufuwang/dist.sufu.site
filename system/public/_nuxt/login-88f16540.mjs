import{u as v,_ as C,d as g,a as V,r as w,b as x,w as y,c as l,e as S,f as t,g as n,h as E,v as B,i as D,j as R,o as A,E as F}from"./bootstrap-4c3db2f1.mjs";import{u as N}from"./asyncData-3d66c517.mjs";const U=()=>v()._route,k=g({setup(b,{expose:o}){o();const d=U(),{redirect:e}=d.query||{},{BASE_URL:m}=V(),_=w(!0),i=x({isShow:!1,title:"",type:""}),s=w({account:"",password:"",isCanRegister:!1});y(()=>s.value,({account:u,password:r})=>{_.value=!u||!r},{deep:!0});const c={route:d,redirectUrl:e,BASE_URL:m,isDisabled:_,alertInfo:i,form:s,handleSubmit:async()=>{const{data:u,error:r}=await N("login",()=>$fetch(`${m}/system/login`,{method:"post",body:s.value,credentials:"include"})),{status:a,message:h}=u.value||r.value.data,p=a===200;F({message:h,type:p?"success":"warning"}),p&&e&&setTimeout(()=>{window.location.href=e},1e3)}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),j={class:"container"},I=D("span",null,"\u82E5\u672A\u6CE8\u518C, \u5219\u4F7F\u7528\u5F53\u524D\u8D26\u53F7\u5BC6\u7801\u81EA\u52A8\u6CE8\u518C",-1),T=R("\u767B\u9646");function q(b,o,d,e,m,_){const i=l("el-input"),s=l("el-form-item"),f=l("el-switch"),c=l("el-alert"),u=l("el-button"),r=l("el-form");return A(),S("div",j,[t(r,{class:"form","label-position":"right","label-width":"60px",model:e.form},{default:n(()=>[t(s,{label:"\u8D26\u53F7"},{default:n(()=>[t(i,{modelValue:e.form.account,"onUpdate:modelValue":o[0]||(o[0]=a=>e.form.account=a)},null,8,["modelValue"])]),_:1}),t(s,{label:"\u5BC6\u7801"},{default:n(()=>[t(i,{modelValue:e.form.password,"onUpdate:modelValue":o[1]||(o[1]=a=>e.form.password=a)},null,8,["modelValue"])]),_:1}),t(s,{class:"switch"},{default:n(()=>[t(f,{modelValue:e.form.isCanRegister,"onUpdate:modelValue":o[2]||(o[2]=a=>e.form.isCanRegister=a),"inline-prompt":"","active-text":"Y","inactive-text":"N"},null,8,["modelValue"]),I]),_:1}),E(t(c,{class:"alert",title:"success alert",type:"success"},null,512),[[B,e.alertInfo.isShow]]),t(s,null,{default:n(()=>[t(u,{onClick:e.handleSubmit,disabled:e.isDisabled},{default:n(()=>[T]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"])])}var O=C(k,[["render",q]]);export{O as default};
